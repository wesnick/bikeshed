@charset "utf-8";
@use "sass:color";
@use "bulma/sass/utilities/css-variables" as cv;
@use "bulma/sass/utilities/derived-variables" as dv;
@use "bulma/sass/utilities/controls" as mx;


// Import your base styles, assuming they're in a file called 'variables'
// Adjust the path as needed for your project structure
@use "variables" as *;

@use "bulma/sass/form/shared" as form;

// Variables with namespace
$tagsinput-selected-background-color: $primary !default;
$tagsinput-duplicate-animation: blinker .75s linear infinite !default;

.tags-input {
  @extend input;
  align-content: flex-start;
  display: flex;
  flex-wrap: wrap;
  height: auto;
  min-height: 2.5em;
  padding: 0;
  position: relative;

  .tag {
    font-size: cv.getVar(size-normal);
    margin: .1rem;
    &:hover {
      cursor: pointer;
    }
    &.is-selected {
      background-color: $tagsinput-selected-background-color;
      color: color.invert($tagsinput-selected-background-color);
    }

    &.is-duplicate {
      animation: $tagsinput-duplicate-animation;
    }
  }

  .input {
    border-color: transparent;
    box-shadow: none;
    display: inline-block;
    flex: 1 0 auto;
    height: 2.3rem;
    margin: .1rem;
    width: auto;
  }

  &.is-filter {
    input {
      color: var(--bulma-input-placeholder-color);

      &::placeholder {
        color: var(--bulma-input-placeholder-color);
      }
    }
  }

  &.no-input {
    input {
      color: transparent;
      text-shadow: 0 0 0 var(--bulma-input-placeholder-color);

      &::placeholder {
        color: var(--bulma-input-placeholder-color);
        text-shadow: none;
      }
    }
  }

  .dropdown-menu {
    width: 100%;

    .dropdown-content {
      max-height: 250px;
      overflow: hidden;
      overflow-y: auto;

      &.is-loading {
        &::after {
          @extend %loader;
          left: 50%;
          position: absolute !important;
          top: 50%;
          transform: translate(-50%, -50%);
          z-index: 4;
        }
        &::before {
          background-color: rgba(var(--bulma-body-background-color), .5);
          content: "";
          height: 100%;
          left: 0;
          position: absolute;
          top: 0;
          width: 100%;
          z-index: 3;
        }
      }
    }

    .dropdown-item {
      &:not(.empty-title) {
        &:hover {
          cursor: pointer;
        }
      }

      &.empty-title {
        color: var(--bulma-input-disabled-color);
        text-align: center;

        &:hover {
          background: inherit;
          color: var(--bulma-input-disabled-color);
        }
      }

      mark {
        &.is-highlighted {
          background-color: var(--bulma-warning);
        }
      }
    }
  }

  &.is-small {
    .tag {
      font-size: var(--bulma-size-small);
    }
    .input {
      @include mx.control-small;
    }
  }

  &.is-medium {
    .tag {
      font-size: var(--bulma-size-medium);
    }
    .input {
      @include mx.control-medium;
    }
  }

  &.is-large {
    .tag {
      font-size: var(--bulma-size-large);
    }
    .input {
      @include mx.control-large;
    }
  }

  &.is-disabled,
  &[disabled] {
    background-color: var(--bulma-input-disabled-background-color);
    border-color: var(--bulma-input-disabled-border-color);
    box-shadow: none;
    color: var(--bulma-input-disabled-color);
    cursor: not-allowed;

    .tag {
      background-color: color.adjust(dv.$primary, $lightness: 5%);
      color: var(--bulma-input-disabled-color);
      cursor: not-allowed;
      .delete {
        background-color: color.adjust(dv.$background, $lightness: -5%);
        //border-color: darken(var(--bulma-input-disabled-border-color), 5%);
        box-shadow: none;
        color: var(--bulma-input-disabled-color);
        cursor: not-allowed;
      }
    }

    .input {
      background-color: var(--bulma-input-disabled-background-color);
      border-color: var(--bulma-input-disabled-border-color);
      box-shadow: none;
      color: var(--bulma-input-disabled-color);

      &::placeholder {
        color: var(--bulma-input-disabled-placeholder-color);
      }
    }
  }

  &[readonly] {
    .input {
      box-shadow: none;
    }
  }

  &.is-active {
    .dropdown-menu {
      display: block;
    }
  }
}

@keyframes blinker {
  0% {
    opacity: 1.0;
  }
  50% {
    opacity: 0.0;
  }
  100% {
    opacity: 1.0;
  }
}