<div class="dropdown"
     id="notifications-dropdown"
     hx-get="/components/navbar-notifications"
     hx-trigger="refresh from:body">
  <button class="nav-link dropdown-toggle"
          type="button"
          id="navbarNotificationsDropdownButton"
          data-bs-toggle="dropdown"
          aria-expanded="false">
    <span>Dialogs
      {% if total_running > 0 %}<span class="badge rounded-pill bg-primary ms-1">{{ total_running }}</span>{% endif %}
      {% if total_waiting > 0 %}<span class="badge rounded-pill bg-warning ms-1">{{ total_waiting }}</span>{% endif %}
    </span>
    <span class="ms-1"><i class="fas fa-bell"></i></span>
  </button>
  <ul class="dropdown-menu dropdown-menu-end" id="dropdown-menu" aria-labelledby="navbarNotificationsDropdownButton">
    {% if total_running == 0 and total_waiting == 0 %}
      <li><span class="dropdown-item-text">No active dialogs</span></li>
    {% else %}
      {% if total_running > 0 %}
        <li><h6 class="dropdown-header">Running</h6></li>
        {% for dialog in running_dialogs %}
          <li>
            <a hx-get="/dialog/{{ dialog.id }}"
               hx-target=".dashboard"
               hx-push-url="true"
               class="dropdown-item d-flex justify-content-between align-items-center">
              <span>{{ dialog.description or "Dialog " + dialog.id|string }}</span>
              <span class="badge bg-primary-subtle text-primary-emphasis">{{ dialog.status }}</span>
            </a>
          </li>
        {% endfor %}
      {% endif %}
      {% if total_waiting > 0 %}
        {% if total_running > 0 %}<li><hr class="dropdown-divider"></li>{% endif %}
        <li><h6 class="dropdown-header">Waiting for Input</h6></li>
        {% for dialog in waiting_dialogs %}
          <li>
            <a hx-get="/dialog/{{ dialog.id }}"
               hx-target=".dashboard"
               hx-push-url="true"
               class="dropdown-item d-flex justify-content-between align-items-center">
              <span>{{ dialog.description or "Dialog " + dialog.id|string }}</span>
              <span class="badge bg-warning-subtle text-warning-emphasis">{{ dialog.status }}</span>
            </a>
          </li>
        {% endfor %}
      {% endif %}
    {% endif %}
  </ul>
</div>
